============================= test session starts ==============================
platform linux -- Python 3.11.14, pytest-9.0.2, pluggy-1.6.0
benchmark: 5.2.3 (defaults: timer=time.perf_counter disable_gc=False min_rounds=5 min_time=0.000005 max_time=1.0 calibration_precision=10 warmup=False warmup_iterations=100000)
rootdir: /home/user/Agent-OS
configfile: pyproject.toml (WARNING: ignoring pytest config in tox.ini!)
plugins: benchmark-5.2.3, cov-7.0.0, anyio-4.12.1, asyncio-1.3.0
asyncio: mode=Mode.STRICT, debug=False, asyncio_default_fixture_loop_scope=None, asyncio_default_test_loop_scope=function
collected 1742 items

tests/test_advanced_memory.py FFFFFFF..FFEEEEEEEEEEEFEEEEEEEEEFEEEEEE... [  2%]
FFEEE.FF.FFFFFF.FFF.FFF..FFFF......                                      [  4%]
tests/test_agent_config.py .............F.........                       [  5%]
tests/test_agent_interface.py ......................                     [  7%]
tests/test_agent_loader.py ..........................                    [  8%]
tests/test_attack_detection.py ..............FF................F........ [ 10%]
..................                                                       [ 11%]
tests/test_boundary.py ............F...F...F.........F.................. [ 14%]
..........                                                               [ 15%]
tests/test_boundary_integration.py ......F.F............F........F...... [ 17%]
..............                                                           [ 18%]
tests/test_ceremony.py ................................................. [ 21%]
........                                                                 [ 21%]
tests/test_constitution_loader.py ....................                   [ 22%]
tests/test_contracts.py ................................................ [ 25%]
................................                                         [ 27%]
tests/test_federation.py .......F.......FFFFF....................FF..FF. [ 29%]
F.............................FF.........FF.FF                           [ 32%]
tests/test_hybrid_certs.py ssssssssssssssssssssssssssss                  [ 34%]
tests/test_installer.py ................................................ [ 36%]
................                                                         [ 37%]
tests/test_integration.py ................                               [ 38%]
tests/test_messaging_bus.py ........FF...F..........                     [ 40%]
tests/test_messaging_models.py .........................                 [ 41%]
tests/test_mobile.py ................................................... [ 44%]
.............................F..................................         [ 48%]
tests/test_models.py ...............                                     [ 49%]
tests/test_multimodal.py ............................................... [ 51%]
....................................                                     [ 53%]
tests/test_muse.py ..................................................... [ 56%]
....                                                                     [ 57%]
tests/test_observability.py .........................................    [ 59%]
tests/test_parser.py ...............                                     [ 60%]
tests/test_post_quantum.py ssssssssssssssssssssssssssssssssss            [ 62%]
tests/test_pq_production.py ...................FF...F.........           [ 64%]
tests/test_quill.py .................................................... [ 67%]
.........                                                                [ 67%]
tests/test_sage.py ..................................................... [ 70%]
                                                                         [ 70%]
tests/test_sdk.py .............................................          [ 73%]
tests/test_smith.py .................................................... [ 76%]
...                                                                      [ 76%]
tests/test_tools.py .................................................... [ 79%]
..................                                                       [ 80%]
tests/test_utils.py ..EEEEEEEEEEEEE.F...........F.F..FF.F.FF............ [ 83%]
..FFF........EEEEEEEEEEEE                                                [ 84%]
tests/test_validator.py ...........                                      [ 85%]
tests/test_value_ledger.py ...............................ssssss         [ 87%]
tests/test_voice.py .................................................... [ 90%]
...............................                                          [ 92%]
tests/test_web.py ...EEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEEE..FFF...FFFEE [ 95%]
EEEEEEEEEEEEEEEE...EEEEEEEEEEEFFFFF                                      [ 97%]
tests/test_whisper.py ...........................................        [100%]

==================================== ERRORS ====================================
________ ERROR at setup of TestThreatCorrelator.test_create_correlator _________
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_______ ERROR at setup of TestThreatCorrelator.test_default_rules_loaded _______
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________ ERROR at setup of TestThreatCorrelator.test_add_custom_rule __________
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
______ ERROR at setup of TestThreatCorrelator.test_correlate_single_entry ______
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
____ ERROR at setup of TestThreatCorrelator.test_correlate_finds_kill_chain ____
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_____ ERROR at setup of TestThreatCorrelator.test_threat_level_calculation _____
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
______ ERROR at setup of TestThreatCorrelator.test_cluster_entry_tracking ______
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
________ ERROR at setup of TestThreatCorrelator.test_get_cluster_by_id _________
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________ ERROR at setup of TestThreatCorrelator.test_correlator_stats _________
tests/test_advanced_memory.py:323: in store_with_data
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_______ ERROR at setup of TestPatternSynthesizer.test_create_synthesizer _______
tests/test_advanced_memory.py:480: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
________ ERROR at setup of TestPatternSynthesizer.test_detect_patterns _________
tests/test_advanced_memory.py:480: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________ ERROR at setup of TestPatternSynthesizer.test_analyze_trends _________
tests/test_advanced_memory.py:480: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
________ ERROR at setup of TestPatternSynthesizer.test_generate_summary ________
tests/test_advanced_memory.py:480: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
________ ERROR at setup of TestPatternSynthesizer.test_summary_to_dict _________
tests/test_advanced_memory.py:480: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
__________ ERROR at setup of TestPatternSynthesizer.test_get_patterns __________
tests/test_advanced_memory.py:480: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_______ ERROR at setup of TestPatternSynthesizer.test_synthesizer_stats ________
tests/test_advanced_memory.py:480: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
________ ERROR at setup of TestBehavioralBaseline.test_create_baseline _________
tests/test_advanced_memory.py:593: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________ ERROR at setup of TestBehavioralBaseline.test_learn_baseline _________
tests/test_advanced_memory.py:593: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
____________ ERROR at setup of TestBehavioralBaseline.test_is_ready ____________
tests/test_advanced_memory.py:593: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_____ ERROR at setup of TestBehavioralBaseline.test_score_normal_activity ______
tests/test_advanced_memory.py:593: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
____ ERROR at setup of TestBehavioralBaseline.test_anomaly_score_structure _____
tests/test_advanced_memory.py:593: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_____ ERROR at setup of TestBehavioralBaseline.test_anomaly_score_to_dict ______
tests/test_advanced_memory.py:593: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________ ERROR at setup of TestBehavioralBaseline.test_baseline_stats _________
tests/test_advanced_memory.py:593: in populated_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_____ ERROR at setup of TestBoundaryDaemonConnector.test_create_connector ______
tests/test_advanced_memory.py:760: in store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_______ ERROR at setup of TestBoundaryDaemonConnector.test_initial_mode ________
tests/test_advanced_memory.py:760: in store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________ ERROR at setup of TestBoundaryDaemonConnector.test_set_mode __________
tests/test_advanced_memory.py:760: in store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
______ ERROR at setup of TestBoundaryDaemonConnector.test_connector_stats ______
tests/test_advanced_memory.py:760: in store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
______ ERROR at setup of TestBoundaryDaemonConnector.test_connect_success ______
tests/test_advanced_memory.py:760: in store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
______ ERROR at setup of TestBoundaryDaemonConnector.test_connect_failure ______
tests/test_advanced_memory.py:760: in store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_____ ERROR at setup of TestEncryptionService.test_encrypt_decrypt_string ______
tests/test_utils.py:53: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
______ ERROR at setup of TestEncryptionService.test_encrypt_decrypt_bytes ______
tests/test_utils.py:53: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
____ ERROR at setup of TestEncryptionService.test_encrypt_different_outputs ____
tests/test_utils.py:53: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_____ ERROR at setup of TestEncryptionService.test_decrypt_invalid_format ______
tests/test_utils.py:53: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionService.test_decrypt_legacy_format_rejected __
tests/test_utils.py:53: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__ ERROR at setup of TestEncryptionService.test_decrypt_plaintext_passthrough __
tests/test_utils.py:53: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ ERROR at setup of TestEncryptionService.test_derive_key ____________
tests/test_utils.py:53: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__ ERROR at setup of TestEncryptionService.test_encrypt_with_associated_data ___
tests/test_utils.py:53: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_______ ERROR at setup of TestCredentialManager.test_store_and_retrieve ________
tests/test_utils.py:138: in credential_manager
    encryption = EncryptionService(master_key=key)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
______ ERROR at setup of TestCredentialManager.test_retrieve_nonexistent _______
tests/test_utils.py:138: in credential_manager
    encryption = EncryptionService(master_key=key)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________ ERROR at setup of TestCredentialManager.test_delete_credential ________
tests/test_utils.py:138: in credential_manager
    encryption = EncryptionService(master_key=key)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
____________ ERROR at setup of TestCredentialManager.test_list_keys ____________
tests/test_utils.py:138: in credential_manager
    encryption = EncryptionService(master_key=key)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ ERROR at setup of TestCredentialManager.test_persistence ___________
tests/test_utils.py:138: in credential_manager
    encryption = EncryptionService(master_key=key)
                 ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_encrypt_decrypt_roundtrip[simple] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_encrypt_decrypt_roundtrip[empty] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_encrypt_decrypt_roundtrip[single_char] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_encrypt_decrypt_roundtrip[large_string] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_encrypt_decrypt_roundtrip[unicode] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_encrypt_decrypt_roundtrip[special_chars] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_encrypt_decrypt_roundtrip[whitespace] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_encrypt_decrypt_roundtrip[multiline] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_key_derivation_length[short_password] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_key_derivation_length[long_password] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_key_derivation_length[alphanumeric] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_ ERROR at setup of TestEncryptionParameterized.test_key_derivation_length[unicode_password] _
tests/test_utils.py:508: in encryption_service
    return EncryptionService(master_key=key)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________________ ERROR at setup of TestChatAPI.test_chat_status ________________
tests/test_web.py:74: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_______________ ERROR at setup of TestChatAPI.test_send_message ________________
tests/test_web.py:74: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestChatAPI.test_list_conversations _____________
tests/test_web.py:74: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestChatAPI.test_send_empty_message _____________
tests/test_web.py:74: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_______________ ERROR at setup of TestAgentsAPI.test_list_agents _______________
tests/test_web.py:126: in client
    with patch("src.web.routes.agents.REAL_AGENTS_AVAILABLE", False):
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:705: in resolve_name
    mod = importlib.import_module(s)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
<frozen importlib._bootstrap_external>:940: in exec_module
    ???
<frozen importlib._bootstrap>:241: in _call_with_frames_removed
    ???
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________________ ERROR at setup of TestAgentsAPI.test_get_agent ________________
tests/test_web.py:126: in client
    with patch("src.web.routes.agents.REAL_AGENTS_AVAILABLE", False):
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:705: in resolve_name
    mod = importlib.import_module(s)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
<frozen importlib._bootstrap_external>:940: in exec_module
    ???
<frozen importlib._bootstrap>:241: in _call_with_frames_removed
    ???
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__________ ERROR at setup of TestAgentsAPI.test_get_nonexistent_agent __________
tests/test_web.py:126: in client
    with patch("src.web.routes.agents.REAL_AGENTS_AVAILABLE", False):
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:705: in resolve_name
    mod = importlib.import_module(s)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
<frozen importlib._bootstrap_external>:940: in exec_module
    ???
<frozen importlib._bootstrap>:241: in _call_with_frames_removed
    ???
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
______________ ERROR at setup of TestAgentsAPI.test_agent_metrics ______________
tests/test_web.py:126: in client
    with patch("src.web.routes.agents.REAL_AGENTS_AVAILABLE", False):
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:705: in resolve_name
    mod = importlib.import_module(s)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
<frozen importlib._bootstrap_external>:940: in exec_module
    ???
<frozen importlib._bootstrap>:241: in _call_with_frames_removed
    ???
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_______________ ERROR at setup of TestAgentsAPI.test_start_agent _______________
tests/test_web.py:126: in client
    with patch("src.web.routes.agents.REAL_AGENTS_AVAILABLE", False):
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:705: in resolve_name
    mod = importlib.import_module(s)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
<frozen importlib._bootstrap_external>:940: in exec_module
    ???
<frozen importlib._bootstrap>:241: in _call_with_frames_removed
    ???
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_______________ ERROR at setup of TestAgentsAPI.test_stop_agent ________________
tests/test_web.py:126: in client
    with patch("src.web.routes.agents.REAL_AGENTS_AVAILABLE", False):
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:705: in resolve_name
    mod = importlib.import_module(s)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
<frozen importlib._bootstrap_external>:940: in exec_module
    ???
<frozen importlib._bootstrap>:241: in _call_with_frames_removed
    ???
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_____________ ERROR at setup of TestAgentsAPI.test_agents_overview _____________
tests/test_web.py:126: in client
    with patch("src.web.routes.agents.REAL_AGENTS_AVAILABLE", False):
/usr/lib/python3.11/unittest/mock.py:1430: in __enter__
    self.target = self.getter()
                  ^^^^^^^^^^^^^
/usr/lib/python3.11/pkgutil.py:705: in resolve_name
    mod = importlib.import_module(s)
          ^^^^^^^^^^^^^^^^^^^^^^^^^^
/usr/lib/python3.11/importlib/__init__.py:126: in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
<frozen importlib._bootstrap>:1204: in _gcd_import
    ???
<frozen importlib._bootstrap>:1176: in _find_and_load
    ???
<frozen importlib._bootstrap>:1147: in _find_and_load_unlocked
    ???
<frozen importlib._bootstrap>:690: in _load_unlocked
    ???
<frozen importlib._bootstrap_external>:940: in exec_module
    ???
<frozen importlib._bootstrap>:241: in _call_with_frames_removed
    ???
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ ERROR at setup of TestConstitutionAPI.test_get_overview ____________
tests/test_web.py:199: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
___________ ERROR at setup of TestConstitutionAPI.test_list_sections ___________
tests/test_web.py:199: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestConstitutionAPI.test_list_rules _____________
tests/test_web.py:199: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____________ ERROR at setup of TestConstitutionAPI.test_get_rule ______________
tests/test_web.py:199: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestConstitutionAPI.test_create_rule ____________
tests/test_web.py:199: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
___ ERROR at setup of TestConstitutionAPI.test_create_supreme_rule_forbidden ___
tests/test_web.py:199: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_________ ERROR at setup of TestConstitutionAPI.test_validate_content __________
tests/test_web.py:199: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____ ERROR at setup of TestConstitutionAPI.test_validate_harmful_content ______
tests/test_web.py:199: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
______________ ERROR at setup of TestMemoryAPI.test_list_memories ______________
tests/test_web.py:300: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestMemoryAPI.test_get_memory_stats _____________
tests/test_web.py:300: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
______________ ERROR at setup of TestMemoryAPI.test_create_memory ______________
tests/test_web.py:300: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
______ ERROR at setup of TestMemoryAPI.test_create_memory_without_consent ______
tests/test_web.py:300: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____________ ERROR at setup of TestMemoryAPI.test_search_memories _____________
tests/test_web.py:300: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____________ ERROR at setup of TestMemoryAPI.test_export_memories _____________
tests/test_web.py:300: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_______________ ERROR at setup of TestSystemAPI.test_system_info _______________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
______________ ERROR at setup of TestSystemAPI.test_system_status ______________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestSystemAPI.test_component_health _____________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
______________ ERROR at setup of TestSystemAPI.test_list_settings ______________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_______________ ERROR at setup of TestSystemAPI.test_get_setting _______________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____________ ERROR at setup of TestSystemAPI.test_update_setting ______________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____________ ERROR at setup of TestSystemAPI.test_system_version ______________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____________ ERROR at setup of TestSystemAPI.test_system_metrics ______________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
________ ERROR at setup of TestSystemAPI.test_shutdown_without_confirm _________
tests/test_web.py:372: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestWebSocket.test_websocket_connect ____________
tests/test_web.py:460: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_________ ERROR at setup of TestWebSocket.test_websocket_send_message __________
tests/test_web.py:460: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
___________ ERROR at setup of TestWebSocket.test_websocket_ping_pong ___________
tests/test_web.py:460: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
__________ ERROR at setup of TestWebSocket.test_websocket_get_history __________
tests/test_web.py:460: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestHealthCheck.test_health_endpoint ____________
tests/test_web.py:722: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
______ ERROR at setup of TestAcceptanceCriteria.test_chat_interface_works ______
tests/test_web.py:748: in client
    import src.web.routes.agents as agents_module
E   ImportError: cannot import name 'routes' from 'src.web' (/home/user/Agent-OS/src/web/__init__.py)
_____ ERROR at setup of TestAcceptanceCriteria.test_agent_monitoring_works _____
tests/test_web.py:748: in client
    import src.web.routes.agents as agents_module
E   ImportError: cannot import name 'routes' from 'src.web' (/home/user/Agent-OS/src/web/__init__.py)
__ ERROR at setup of TestAcceptanceCriteria.test_constitutional_editor_works ___
tests/test_web.py:748: in client
    import src.web.routes.agents as agents_module
E   ImportError: cannot import name 'routes' from 'src.web' (/home/user/Agent-OS/src/web/__init__.py)
____ ERROR at setup of TestAcceptanceCriteria.test_memory_management_works _____
tests/test_web.py:748: in client
    import src.web.routes.agents as agents_module
E   ImportError: cannot import name 'routes' from 'src.web' (/home/user/Agent-OS/src/web/__init__.py)
_______________ ERROR at setup of TestVoiceAPI.test_voice_status _______________
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_______________ ERROR at setup of TestVoiceAPI.test_list_voices ________________
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
______ ERROR at setup of TestVoiceAPI.test_transcribe_with_invalid_base64 ______
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_______ ERROR at setup of TestVoiceAPI.test_transcribe_with_valid_base64 _______
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_________ ERROR at setup of TestVoiceAPI.test_synthesize_without_text __________
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
___________ ERROR at setup of TestVoiceAPI.test_synthesize_with_text ___________
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestVoiceAPI.test_synthesize_stream _____________
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestVoiceAPI.test_update_stt_config _____________
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____________ ERROR at setup of TestVoiceAPI.test_update_tts_config _____________
tests/test_web.py:856: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
______ ERROR at setup of TestVoiceWebSocket.test_voice_websocket_connect _______
tests/test_web.py:1014: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
____ ERROR at setup of TestVoiceWebSocket.test_voice_websocket_unknown_type ____
tests/test_web.py:1014: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____ ERROR at setup of TestVoiceWebSocket.test_voice_websocket_synthesize _____
tests/test_web.py:1014: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____ ERROR at setup of TestVoiceWebSocket.test_voice_websocket_transcribe _____
tests/test_web.py:1014: in client
    app = create_app()
          ^^^^^^^^^^^^
src/web/app.py:340: in create_app
    from .routes import (
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log setup ------------------------------
WARNING  src.web.config:config.py:113 Authentication is disabled. Set AGENT_OS_REQUIRE_AUTH=true and AGENT_OS_API_KEY for production use.
_____________ ERROR at setup of TestSecurityAPI.test_list_attacks ______________
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_______ ERROR at setup of TestSecurityAPI.test_list_attacks_with_filters _______
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ ERROR at setup of TestSecurityAPI.test_get_attack_detail ___________
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
______ ERROR at setup of TestSecurityAPI.test_get_attack_detection_status ______
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_________ ERROR at setup of TestSecurityAPI.test_list_recommendations __________
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________ ERROR at setup of TestSecurityAPI.test_approve_recommendation _________
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_________ ERROR at setup of TestSecurityAPI.test_reject_recommendation _________
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_____ ERROR at setup of TestSecurityAPI.test_add_comment_to_recommendation _____
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ ERROR at setup of TestSecurityAPI.test_pipeline_control ____________
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________ ERROR at setup of TestSecurityAPI.test_invalid_pipeline_action ________
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_____________ ERROR at setup of TestSecurityAPI.test_list_patterns _____________
tests/test_web.py:1139: in client
    import src.web.routes.security as security_module
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
---------------------------- Captured stderr setup -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
=================================== FAILURES ===================================
_______________ TestSecurityIntelligenceStore.test_create_store ________________
tests/test_advanced_memory.py:162: in test_create_store
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________________ TestSecurityIntelligenceStore.test_add_entry _________________
tests/test_advanced_memory.py:167: in test_add_entry
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________________ TestSecurityIntelligenceStore.test_get_entry _________________
tests/test_advanced_memory.py:179: in test_get_entry
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_______________ TestSecurityIntelligenceStore.test_query_by_type _______________
tests/test_advanced_memory.py:194: in test_query_by_type
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_____________ TestSecurityIntelligenceStore.test_query_by_severity _____________
tests/test_advanced_memory.py:209: in test_query_by_severity
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
______________ TestSecurityIntelligenceStore.test_query_by_source ______________
tests/test_advanced_memory.py:224: in test_query_by_source
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
____________ TestSecurityIntelligenceStore.test_query_by_time_range ____________
tests/test_advanced_memory.py:239: in test_query_by_time_range
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_________________ TestSecurityIntelligenceStore.test_get_stats _________________
tests/test_advanced_memory.py:281: in test_get_stats
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
___________________ TestSecurityIntelligenceStore.test_count ___________________
tests/test_advanced_memory.py:297: in test_count
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
____________ TestPatternSynthesizer.test_detect_volumetric_pattern _____________
tests/test_advanced_memory.py:502: in test_detect_volumetric_pattern
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
_____________ TestBehavioralBaseline.test_score_anomalous_activity _____________
tests/test_advanced_memory.py:663: in test_score_anomalous_activity
    store = create_intelligence_store(storage_path=temp_storage)
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/store.py:1023: in create_intelligence_store
    store = SecurityIntelligenceStore(
src/agents/smith/advanced_memory/store.py:262: in __init__
    self._init_database()
src/agents/smith/advanced_memory/store.py:288: in _init_database
    self._db = sqlite3.connect(db_path, check_same_thread=False)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   sqlite3.OperationalError: unable to open database file
__________ TestBoundaryDaemonConnector.test_policy_decision_creation ___________
tests/test_advanced_memory.py:834: in test_policy_decision_creation
    decision = PolicyDecision(
E   TypeError: PolicyDecision.__init__() got an unexpected keyword argument 'policy_id'
___________ TestBoundaryDaemonConnector.test_tripwire_alert_creation ___________
tests/test_advanced_memory.py:849: in test_tripwire_alert_creation
    alert = TripwireAlert(
E   TypeError: TripwireAlert.__init__() got an unexpected keyword argument 'tripwire_id'
______________ TestAdvancedMemoryManager.test_initialize_manager _______________
tests/test_advanced_memory.py:925: in test_initialize_manager
    assert result is True
E   assert False is True
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_________________ TestAdvancedMemoryManager.test_start_manager _________________
tests/test_advanced_memory.py:935: in test_start_manager
    assert result is True
E   assert False is True
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_______________ TestAdvancedMemoryManager.test_factory_function ________________
tests/test_advanced_memory.py:961: in test_factory_function
    assert status.initialized is True
E   assert False is True
E    +  where False = MemoryStatus(initialized=False, running=False, healthy=False, store_healthy=False, correlator_active=False, synthesize..._clusters=0, detected_patterns=0, anomaly_score=0.0, current_threat_level=<ThreatLevel.UNKNOWN: 0>, critical_threats=0).initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_________________ TestAdvancedMemoryManager.test_ingest_entry __________________
tests/test_advanced_memory.py:980: in test_ingest_entry
    entry_id = manager.ingest(entry)
               ^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_______________ TestAdvancedMemoryManager.test_ingest_siem_event _______________
tests/test_advanced_memory.py:998: in test_ingest_siem_event
    entry_id = manager.ingest_siem_event(event_data)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/manager.py:410: in ingest_siem_event
    return self.ingest(entry)
           ^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_____________ TestAdvancedMemoryManager.test_ingest_boundary_event _____________
tests/test_advanced_memory.py:1019: in test_ingest_boundary_event
    entry_id = manager.ingest_boundary_event(event)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/manager.py:423: in ingest_boundary_event
    return self.ingest(entry)
           ^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_________________ TestAdvancedMemoryManager.test_query_entries _________________
tests/test_advanced_memory.py:1031: in test_query_entries
    manager.ingest(IntelligenceEntry(
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
______________ TestAdvancedMemoryManager.test_get_threat_clusters ______________
tests/test_advanced_memory.py:1053: in test_get_threat_clusters
    manager.ingest(IntelligenceEntry(
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_______________ TestAdvancedMemoryManager.test_get_anomaly_score _______________
tests/test_advanced_memory.py:1086: in test_get_anomaly_score
    manager.ingest(IntelligenceEntry(
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_______________ TestAdvancedMemoryManager.test_generate_summary ________________
tests/test_advanced_memory.py:1110: in test_generate_summary
    manager.ingest(IntelligenceEntry(
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
__________________ TestAdvancedMemoryManager.test_get_status ___________________
tests/test_advanced_memory.py:1133: in test_get_status
    assert status.initialized is True
E   assert False is True
E    +  where False = MemoryStatus(initialized=False, running=False, healthy=False, store_healthy=False, correlator_active=False, synthesize..._clusters=0, detected_patterns=0, anomaly_score=0.0, current_threat_level=<ThreatLevel.UNKNOWN: 0>, critical_threats=0).initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
___________________ TestAdvancedMemoryManager.test_get_stats ___________________
tests/test_advanced_memory.py:1158: in test_get_stats
    assert "store" in stats
E   AssertionError: assert 'store' in {'anomalies_detected': 0, 'correlations_found': 0, 'events_processed': 0, 'patterns_detected': 0, ...}
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_______________ TestAdvancedMemoryManager.test_get_boundary_mode _______________
tests/test_advanced_memory.py:1168: in test_get_boundary_mode
    assert mode == BoundaryMode.OPEN
E   assert None == <BoundaryMode.OPEN: 1>
E    +  where <BoundaryMode.OPEN: 1> = BoundaryMode.OPEN
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_______________ TestAdvancedMemoryManager.test_set_boundary_mode _______________
tests/test_advanced_memory.py:1179: in test_set_boundary_mode
    assert mode == BoundaryMode.RESTRICTED
E   assert None == <BoundaryMode.RESTRICTED: 2>
E    +  where <BoundaryMode.RESTRICTED: 2> = BoundaryMode.RESTRICTED
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_______________ TestAdvancedMemoryIntegration.test_full_pipeline _______________
tests/test_advanced_memory.py:1233: in test_full_pipeline
    manager.ingest_siem_event({
src/agents/smith/advanced_memory/manager.py:410: in ingest_siem_event
    return self.ingest(entry)
           ^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
_________ TestAdvancedMemoryIntegration.test_multi_source_correlation __________
tests/test_advanced_memory.py:1293: in test_multi_source_correlation
    manager.ingest_siem_event({
src/agents/smith/advanced_memory/manager.py:410: in ingest_siem_event
    return self.ingest(entry)
           ^^^^^^^^^^^^^^^^^^
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
__________ TestAdvancedMemoryIntegration.test_anomaly_detection_flow ___________
tests/test_advanced_memory.py:1328: in test_anomaly_detection_flow
    manager.ingest(IntelligenceEntry(
src/agents/smith/advanced_memory/manager.py:351: in ingest
    raise RuntimeError("Advanced Memory Manager not initialized")
E   RuntimeError: Advanced Memory Manager not initialized
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
___________ TestAdvancedMemoryIntegration.test_concurrent_operations ___________
tests/test_advanced_memory.py:1389: in test_concurrent_operations
    assert len(errors) == 0, f"Errors occurred: {errors}"
E   AssertionError: Errors occurred: [RuntimeError('Advanced Memory Manager not initialized'), RuntimeError('Advanced Memory Manager not initialized'), RuntimeError('Advanced Memory Manager not initialized'), RuntimeError('Advanced Memory Manager not initialized'), RuntimeError('Advanced Memory Manager not initialized')]
E   assert 5 == 0
E    +  where 5 = len([RuntimeError('Advanced Memory Manager not initialized'), RuntimeError('Advanced Memory Manager not initialized'), Run...ed'), RuntimeError('Advanced Memory Manager not initialized'), RuntimeError('Advanced Memory Manager not initialized')])
------------------------------ Captured log call -------------------------------
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
ERROR    src.agents.smith.advanced_memory.manager:manager.py:259 Failed to initialize Advanced Memory Manager: unable to open database file
____________________ TestConfigLoader.test_load_from_string ____________________
tests/test_agent_config.py:243: in test_load_from_string
    config = loader.load_from_string(content, format="yaml")
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
E   TypeError: ConfigLoader.load_from_string() got an unexpected keyword argument 'format'
__________________ TestAttackDetector.test_process_flow_event __________________
tests/test_attack_detection.py:303: in test_process_flow_event
    assert attack is not None
E   assert None is not None
__________________ TestAttackDetector.test_attack_correlation __________________
tests/test_attack_detection.py:331: in test_attack_correlation
    assert len(attacks) >= 1
E   assert 0 >= 1
E    +  where 0 = len([])
______________ TestAttackDetectionIntegration.test_full_pipeline _______________
tests/test_attack_detection.py:730: in test_full_pipeline
    assert attack.attack_type == AttackType.PROMPT_INJECTION
E   AssertionError: assert <AttackType.RECONNAISSANCE: 8> == <AttackType.PROMPT_INJECTION: 3>
E    +  where <AttackType.RECONNAISSANCE: 8> = AttackEvent(attack_id='ATK-9F6DE2244325', attack_type=<AttackType.RECONNAISSANCE: 8>, severity=<AttackSeverity.MEDIUM:...tection_source': 'boundary_daemon', 'patterns_matched': 1}, updated_at=datetime.datetime(2026, 2, 7, 5, 5, 31, 572198)).attack_type
E    +  and   <AttackType.PROMPT_INJECTION: 3> = AttackType.PROMPT_INJECTION
------------------------------ Captured log call -------------------------------
WARNING  src.agents.smith.attack_detection.detector:detector.py:652 Attack detected: ATK-9F6DE2244325 - RECONNAISSANCE (MEDIUM)
_______________________ TestTripwire.test_tripwire_reset _______________________
tests/test_boundary.py:230: in test_tripwire_reset
    assert success is True
E   assert False is True
------------------------------ Captured log call -------------------------------
WARNING  src.boundary.daemon.tripwires:tripwires.py:142 Tripwire reset_test reset rejected: code must contain uppercase, lowercase, and digits
______________________ TestTripwireSystem.test_reset_all _______________________
tests/test_boundary.py:292: in test_reset_all
    assert count >= 1
E   assert 0 >= 1
------------------------------ Captured log call -------------------------------
WARNING  src.boundary.daemon.tripwires:tripwires.py:142 Tripwire trigger_me reset rejected: code must contain uppercase, lowercase, and digits
______________ TestPolicyEngine.test_mode_requires_authorization _______________
tests/test_boundary.py:340: in test_mode_requires_authorization
    assert success is True
E   assert False is True
------------------------------ Captured log call -------------------------------
WARNING  src.boundary.daemon.policy_engine:policy_engine.py:188 Unauthorized mode change attempt: BoundaryMode.LOCKDOWN -> BoundaryMode.TRUSTED (code too short, minimum 16 chars required)
WARNING  src.boundary.daemon.policy_engine:policy_engine.py:188 Unauthorized mode change attempt: BoundaryMode.LOCKDOWN -> BoundaryMode.TRUSTED (code too short, minimum 16 chars required)
_______________________ TestEnforcementLayer.test_resume _______________________
tests/test_boundary.py:461: in test_resume
    assert success is True
E   assert False is True
------------------------------ Captured log call -------------------------------
ERROR    src.boundary.daemon.enforcement:enforcement.py:216 Enforcement: HALT - test (success=True)
WARNING  src.boundary.daemon.enforcement:enforcement.py:294 Resume attempt with invalid authorization: code too short
__________ TestFailSafeMechanisms.test_resume_requires_authorization ___________
tests/test_boundary_integration.py:208: in test_resume_requires_authorization
    assert enforcement.resume("valid_authorization_code") is True
E   AssertionError: assert False is True
E    +  where False = resume('valid_authorization_code')
E    +    where resume = <src.boundary.daemon.enforcement.EnforcementLayer object at 0x7ececb778ed0>.resume
------------------------------ Captured log call -------------------------------
ERROR    src.boundary.daemon.enforcement:enforcement.py:216 Enforcement: HALT - Test halt (success=True)
WARNING  src.boundary.daemon.enforcement:enforcement.py:294 Resume attempt with invalid authorization: code too short
WARNING  src.boundary.daemon.enforcement:enforcement.py:303 Resume attempt with invalid authorization: code must contain uppercase, lowercase, and digits
___________ TestFailSafeMechanisms.test_fail_closed_client_behavior ____________
tests/test_boundary_integration.py:236: in test_fail_closed_client_behavior
    assert client.request_permission("file_write", "agent:test") is False
E   AssertionError: assert True is False
E    +  where True = request_permission('file_write', 'agent:test')
E    +    where request_permission = <src.boundary.client.SmithClient object at 0x7ececb81bdd0>.request_permission
___________ TestTripwireSystem.test_tripwire_requires_auth_to_reset ____________
tests/test_boundary_integration.py:426: in test_tripwire_requires_auth_to_reset
    assert system.reset_tripwire("auth_test", "valid_auth_code") is True
E   AssertionError: assert False is True
E    +  where False = reset_tripwire('auth_test', 'valid_auth_code')
E    +    where reset_tripwire = <src.boundary.daemon.tripwires.TripwireSystem object at 0x7ececb8b26d0>.reset_tripwire
------------------------------ Captured log call -------------------------------
WARNING  src.boundary.daemon.tripwires:tripwires.py:125 Tripwire auth_test reset rejected: code too short (min 16 chars)
WARNING  src.boundary.daemon.tripwires:tripwires.py:125 Tripwire auth_test reset rejected: code too short (min 16 chars)
____ TestPolicyEnforcement.test_mode_change_requires_auth_to_lower_security ____
tests/test_boundary_integration.py:596: in test_mode_change_requires_auth_to_lower_security
    assert success is True
E   assert False is True
------------------------------ Captured log call -------------------------------
WARNING  src.boundary.daemon.policy_engine:policy_engine.py:188 Unauthorized mode change attempt: BoundaryMode.LOCKDOWN -> BoundaryMode.TRUSTED (code too short, minimum 16 chars required)
WARNING  src.boundary.daemon.policy_engine:policy_engine.py:188 Unauthorized mode change attempt: BoundaryMode.LOCKDOWN -> BoundaryMode.TRUSTED (code too short, minimum 16 chars required)
__________________ TestIdentityModule.test_key_pair_generate ___________________
tests/test_federation.py:92: in test_key_pair_generate
    pair = KeyPair.generate(KeyType.ED25519)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ TestIdentityModule.test_identity_manager_initialization ____________
tests/test_federation.py:246: in test_identity_manager_initialization
    manager = IdentityManager(node_id="test-node")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:351: in __init__
    self._initialize()
src/federation/identity.py:360: in _initialize
    self._generate_identity()
src/federation/identity.py:364: in _generate_identity
    self._key_pair = KeyPair.generate(self.key_type)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ TestIdentityModule.test_identity_manager_sign_and_verify ___________
tests/test_federation.py:256: in test_identity_manager_sign_and_verify
    manager = IdentityManager(node_id="test-node")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:351: in __init__
    self._initialize()
src/federation/identity.py:360: in _initialize
    self._generate_identity()
src/federation/identity.py:364: in _generate_identity
    self._key_pair = KeyPair.generate(self.key_type)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
______ TestIdentityModule.test_identity_manager_register_and_get_identity ______
tests/test_federation.py:279: in test_identity_manager_register_and_get_identity
    manager = IdentityManager(node_id="node-a")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:351: in __init__
    self._initialize()
src/federation/identity.py:360: in _initialize
    self._generate_identity()
src/federation/identity.py:364: in _generate_identity
    self._key_pair = KeyPair.generate(self.key_type)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ TestIdentityModule.test_identity_manager_trust_identity ____________
tests/test_federation.py:302: in test_identity_manager_trust_identity
    manager = IdentityManager(node_id="test-node")
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:351: in __init__
    self._initialize()
src/federation/identity.py:360: in _initialize
    self._generate_identity()
src/federation/identity.py:364: in _generate_identity
    self._key_pair = KeyPair.generate(self.key_type)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_______________ TestIdentityModule.test_create_identity_function _______________
tests/test_federation.py:322: in test_create_identity_function
    identity = create_identity(node_id="test-node", display_name="Test")
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:698: in create_identity
    key_pair = KeyPair.generate(key_type)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________ TestCryptoModule.test_default_crypto_provider_encrypt_decrypt _________
tests/test_federation.py:655: in test_default_crypto_provider_encrypt_decrypt
    ciphertext, nonce, auth_tag = crypto.encrypt(plaintext, key)
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:309: in encrypt
    return self._encrypt_aes_gcm(plaintext, key.key_data, associated_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:331: in _encrypt_aes_gcm
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__________ TestCryptoModule.test_default_crypto_provider_key_exchange __________
tests/test_federation.py:670: in test_default_crypto_provider_key_exchange
    pub1, priv1 = crypto1.generate_key_pair(KeyExchangeMethod.X25519)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:367: in generate_key_pair
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_____________ TestCryptoModule.test_session_manager_create_session _____________
tests/test_federation.py:721: in test_session_manager_create_session
    peer_pub, _ = peer_crypto.generate_key_pair(KeyExchangeMethod.X25519)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:367: in generate_key_pair
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
____________ TestCryptoModule.test_session_manager_encrypt_for_peer ____________
tests/test_federation.py:741: in test_session_manager_encrypt_for_peer
    peer_pub, _ = peer_crypto.generate_key_pair(KeyExchangeMethod.X25519)
                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:367: in generate_key_pair
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
___________ TestCryptoModule.test_encrypt_decrypt_message_functions ____________
tests/test_federation.py:778: in test_encrypt_decrypt_message_functions
    encrypted = encrypt_message(plaintext, key, "sender", "recipient")
                ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:726: in encrypt_message
    ciphertext, nonce, auth_tag = provider.encrypt(plaintext, session)
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:309: in encrypt
    return self._encrypt_aes_gcm(plaintext, key.key_data, associated_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:331: in _encrypt_aes_gcm
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________________ TestNodeModule.test_federation_node_start_stop ________________
tests/test_federation.py:1290: in test_federation_node_start_stop
    started = await node.start()
              ^^^^^^^^^^^^^^^^^^
src/federation/node.py:248: in start
    await self._initialize_components()
src/federation/node.py:617: in _initialize_components
    self._identity_manager = IdentityManager(
src/federation/identity.py:351: in __init__
    self._initialize()
src/federation/identity.py:360: in _initialize
    self._generate_identity()
src/federation/identity.py:364: in _generate_identity
    self._key_pair = KeyPair.generate(self.key_type)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_______________ TestNodeModule.test_federation_node_double_start _______________
tests/test_federation.py:1307: in test_federation_node_double_start
    await node.start()
src/federation/node.py:248: in start
    await self._initialize_components()
src/federation/node.py:617: in _initialize_components
    self._identity_manager = IdentityManager(
src/federation/identity.py:351: in __init__
    self._initialize()
src/federation/identity.py:360: in _initialize
    self._generate_identity()
src/federation/identity.py:364: in _generate_identity
    self._key_pair = KeyPair.generate(self.key_type)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
____________________ TestIntegration.test_two_nodes_connect ____________________
tests/test_federation.py:1473: in test_two_nodes_connect
    await node1.start()
src/federation/node.py:248: in start
    await self._initialize_components()
src/federation/node.py:617: in _initialize_components
    self._identity_manager = IdentityManager(
src/federation/identity.py:351: in __init__
    self._initialize()
src/federation/identity.py:360: in _initialize
    self._generate_identity()
src/federation/identity.py:364: in _generate_identity
    self._key_pair = KeyPair.generate(self.key_type)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__________________ TestIntegration.test_identity_and_signing ___________________
tests/test_federation.py:1499: in test_identity_and_signing
    alice = IdentityManager(node_id="alice")
            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:351: in __init__
    self._initialize()
src/federation/identity.py:360: in _initialize
    self._generate_identity()
src/federation/identity.py:364: in _generate_identity
    self._key_pair = KeyPair.generate(self.key_type)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/identity.py:130: in generate
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__________________ TestIntegration.test_encryption_roundtrip ___________________
tests/test_federation.py:1585: in test_encryption_roundtrip
    ciphertext, nonce, auth_tag = crypto.encrypt(original, key)
                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:309: in encrypt
    return self._encrypt_aes_gcm(plaintext, key.key_data, associated_data)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:331: in _encrypt_aes_gcm
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__________________ TestIntegration.test_key_exchange_session ___________________
tests/test_federation.py:1600: in test_key_exchange_session
    alice_pub, alice_priv = alice_mgr.crypto.generate_key_pair(KeyExchangeMethod.X25519)
                            ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/crypto.py:367: in generate_key_pair
    from cryptography.hazmat.primitives import serialization
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/serialization/__init__.py:7: in <module>
    from cryptography.hazmat.primitives._serialization import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/_serialization.py:11: in <module>
    from cryptography.hazmat.primitives.hashes import HashAlgorithm
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/hashes.py:10: in <module>
    from cryptography.hazmat.bindings._rust import openssl as rust_openssl
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________________ TestInMemoryMessageBus.test_dead_letter_queue _________________
tests/test_messaging_bus.py:165: in test_dead_letter_queue
    bus.publish("test-channel", sample_request)
src/messaging/bus.py:270: in publish
    raise MessageDeliveryError(
E   src.messaging.exceptions.MessageDeliveryError: All deliveries failed: failing-subscriber: Handler execution failed: Handler failed
------------------------------ Captured log call -------------------------------
ERROR    src.messaging.bus:bus.py:332 Handler error for failing-subscriber: Handler failed
ERROR    src.messaging.bus:bus.py:255 Handler error during delivery: failing-subscriber: Handler execution failed: Handler failed
________________ TestInMemoryMessageBus.test_retry_dead_letter _________________
tests/test_messaging_bus.py:185: in test_retry_dead_letter
    bus.publish("test-channel", sample_request)
src/messaging/bus.py:270: in publish
    raise MessageDeliveryError(
E   src.messaging.exceptions.MessageDeliveryError: All deliveries failed: test-subscriber: Handler execution failed: First attempt failed
------------------------------ Captured log call -------------------------------
ERROR    src.messaging.bus:bus.py:332 Handler error for test-subscriber: First attempt failed
ERROR    src.messaging.bus:bus.py:255 Handler error during delivery: test-subscriber: Handler execution failed: First attempt failed
_____________________ TestInMemoryMessageBus.test_shutdown _____________________
tests/test_messaging_bus.py:242: in test_shutdown
    success = bus.publish("test-channel", request)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/messaging/bus.py:224: in publish
    raise BusShutdownError("publish")
E   src.messaging.exceptions.BusShutdownError: Cannot publish: message bus is shutting down
------------------------------ Captured log call -------------------------------
WARNING  src.messaging.bus:bus.py:223 Cannot publish: bus is shutting down
__________________________ TestCacheEntry.test_touch ___________________________
tests/test_mobile.py:958: in test_touch
    assert entry.accessed_at > old_accessed
E   AssertionError: assert FakeDatetime(2024, 1, 1, 12, 0, 1) > datetime.datetime(2026, 2, 7, 5, 6, 16, 370577)
E    +  where FakeDatetime(2024, 1, 1, 12, 0, 1) = CacheEntry(key='test', value='data', created_at=datetime.datetime(2026, 2, 7, 5, 6, 16, 370572), accessed_at=FakeDatetime(2024, 1, 1, 12, 0, 1), expires_at=None, size_bytes=0, etag=None, metadata={}).accessed_at
_________________ TestKeyBackupManager.test_export_import_key __________________
tests/test_pq_production.py:340: in test_export_import_key
    backup = backup_manager.export_key(
src/federation/pq/backup.py:479: in export_key
    encrypted_data = self._encrypt(private_key, encryption_key, nonce)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/pq/backup.py:741: in _encrypt
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log call -------------------------------
WARNING  src.federation.pq.backup:backup.py:721 Argon2 not available, using PBKDF2
___________________ TestKeyBackupManager.test_wrong_password ___________________
tests/test_pq_production.py:358: in test_wrong_password
    backup = backup_manager.export_key(
src/federation/pq/backup.py:479: in export_key
    encrypted_data = self._encrypt(private_key, encryption_key, nonce)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/pq/backup.py:741: in _encrypt
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log call -------------------------------
WARNING  src.federation.pq.backup:backup.py:721 Argon2 not available, using PBKDF2
________________ TestBackupWithStorage.test_backup_persistence _________________
tests/test_pq_production.py:428: in test_backup_persistence
    backup = manager.export_key(
src/federation/pq/backup.py:479: in export_key
    encrypted_data = self._encrypt(private_key, encryption_key, nonce)
                     ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/federation/pq/backup.py:741: in _encrypt
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
------------------------------ Captured log call -------------------------------
WARNING  src.federation.pq.backup:backup.py:721 Argon2 not available, using PBKDF2
_______________ TestSensitiveDataRedactor.test_redact_openai_key _______________
tests/test_utils.py:209: in test_redact_openai_key
    assert "sk-proj" not in result
E   AssertionError: assert 'sk-proj' not in 'Using key: ...uvwxyz123456'
E     
E     'sk-proj' is contained here:
E       Using key: sk-proj-abcdefghijklmnopqrstuvwxyz123456
E     ?            +++++++
_______________ TestFactoryFunctions.test_get_encryption_service _______________
tests/test_utils.py:313: in test_get_encryption_service
    service1 = get_encryption_service()
               ^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:663: in get_encryption_service
    _encryption_service = EncryptionService()
                          ^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_____________ TestFactoryFunctions.test_encrypt_decrypt_shortcuts ______________
tests/test_utils.py:330: in test_encrypt_decrypt_shortcuts
    encrypted = encrypt(plaintext)
                ^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:686: in encrypt
    return get_encryption_service().encrypt(value)
           ^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:663: in get_encryption_service
    _encryption_service = EncryptionService()
                          ^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_______________ TestMasterKeyManagement.test_master_key_from_env _______________
tests/test_utils.py:364: in test_master_key_from_env
    service = EncryptionService()
              ^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__________ TestMasterKeyManagement.test_encrypted_key_storage_format ___________
tests/test_utils.py:372: in test_encrypted_key_storage_format
    service = EncryptionService(master_key=key)
              ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:59: in __init__
    self._check_crypto()  # Will raise if not available
    ^^^^^^^^^^^^^^^^^^^^
src/utils/encryption.py:71: in _check_crypto
    from cryptography.hazmat.primitives.ciphers.aead import AESGCM
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/__init__.py:11: in <module>
    from cryptography.hazmat.primitives.ciphers.base import (
/usr/lib/python3/dist-packages/cryptography/hazmat/primitives/ciphers/base.py:10: in <module>
    from cryptography.exceptions import (
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
__ TestSensitiveDataRedactorParameterized.test_redaction_patterns[openai_key] __
tests/test_utils.py:465: in test_redaction_patterns
    assert should_not_contain not in result, f"'{should_not_contain}' should be redacted"
E   AssertionError: 'sk-proj' should be redacted
E   assert 'sk-proj' not in 'Using key: ...uvwxyz123456'
E     
E     'sk-proj' is contained here:
E       Using key: sk-proj-abcdefghijklmnopqrstuvwxyz123456
E     ?            +++++++
_ TestSensitiveDataRedactorParameterized.test_redaction_patterns[github_oauth] _
tests/test_utils.py:465: in test_redaction_patterns
    assert should_not_contain not in result, f"'{should_not_contain}' should be redacted"
E   AssertionError: 'gho_' should be redacted
E   assert 'gho_' not in 'gho_1234567890abcdefghij'
E     
E     'gho_' is contained here:
E       gho_1234567890abcdefghij
E     ? ++++
_ TestSensitiveDataRedactorParameterized.test_redaction_patterns[github_server] _
tests/test_utils.py:465: in test_redaction_patterns
    assert should_not_contain not in result, f"'{should_not_contain}' should be redacted"
E   AssertionError: 'ghs_' should be redacted
E   assert 'ghs_' not in 'ghs_abcdefghij1234567890'
E     
E     'ghs_' is contained here:
E       ghs_abcdefghij1234567890
E     ? ++++
__ TestSensitiveDataRedactorParameterized.test_redaction_patterns[slack_bot] ___
tests/test_utils.py:465: in test_redaction_patterns
    assert should_not_contain not in result, f"'{should_not_contain}' should be redacted"
E   AssertionError: 'xoxb-' should be redacted
E   assert 'xoxb-' not in 'xoxb-FAKE-T...-abcdefghijk'
E     
E     'xoxb-' is contained here:
E       xoxb-FAKE-TEST-TOKEN-abcdefghijk
E     ? +++++
__ TestSensitiveDataRedactorParameterized.test_redaction_patterns[slack_user] __
tests/test_utils.py:465: in test_redaction_patterns
    assert should_not_contain not in result, f"'{should_not_contain}' should be redacted"
E   AssertionError: 'xoxp-' should be redacted
E   assert 'xoxp-' not in 'xoxp-FAKE-T...-abcdefghijk'
E     
E     'xoxp-' is contained here:
E       xoxp-FAKE-TEST-TOKEN-abcdefghijk
E     ? +++++
_ TestSensitiveDataRedactorParameterized.test_redaction_patterns[private_key] __
tests/test_utils.py:465: in test_redaction_patterns
    assert should_not_contain not in result, f"'{should_not_contain}' should be redacted"
E   AssertionError: 'PRIVATE KEY' should be redacted
E   assert 'PRIVATE KEY' not in '-----BEGIN ...ATE KEY-----'
E     
E     'PRIVATE KEY' is contained here:
E       -----BEGIN RSA PRIVATE KEY-----
E     ?                +++++++++++
______________________ TestAgentStore.test_get_all_agents ______________________
tests/test_web.py:572: in test_get_all_agents
    import src.web.routes.agents as agents_module
E   ImportError: cannot import name 'routes' from 'src.web' (/home/user/Agent-OS/src/web/__init__.py)
______________________ TestAgentStore.test_update_status _______________________
tests/test_web.py:586: in test_update_status
    import src.web.routes.agents as agents_module
E   ImportError: cannot import name 'routes' from 'src.web' (/home/user/Agent-OS/src/web/__init__.py)
_________________________ TestAgentStore.test_add_log __________________________
tests/test_web.py:601: in test_add_log
    import src.web.routes.agents as agents_module
E   ImportError: cannot import name 'routes' from 'src.web' (/home/user/Agent-OS/src/web/__init__.py)
_____________________ TestMemoryStore.test_create_and_get ______________________
tests/test_web.py:665: in test_create_and_get
    from src.web.routes.memory import MemoryStore, MemoryCreate, MemoryType
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_________________________ TestMemoryStore.test_search __________________________
tests/test_web.py:686: in test_search
    from src.web.routes.memory import MemoryStore
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_________________________ TestMemoryStore.test_delete __________________________
tests/test_web.py:696: in test_delete
    from src.web.routes.memory import MemoryStore, MemoryCreate
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_________________ TestSecurityModels.test_attack_summary_model _________________
tests/test_web.py:1303: in test_attack_summary_model
    from src.web.routes.security import AttackSummary
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
_____________ TestSecurityModels.test_recommendation_summary_model _____________
tests/test_web.py:1319: in test_recommendation_summary_model
    from src.web.routes.security import RecommendationSummary
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
____________ TestSecurityModels.test_attack_detection_status_model _____________
tests/test_web.py:1335: in test_attack_detection_status_model
    from src.web.routes.security import AttackDetectionStatus
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
________________ TestSecurityModels.test_approve_request_model _________________
tests/test_web.py:1351: in test_approve_request_model
    from src.web.routes.security import ApproveRecommendationRequest
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
____________ TestSecurityModels.test_pipeline_control_request_model ____________
tests/test_web.py:1361: in test_pipeline_control_request_model
    from src.web.routes.security import PipelineControlRequest
src/web/routes/__init__.py:7: in <module>
    from . import agents, chat, constitution, memory, security, system
src/web/routes/memory.py:25: in <module>
    from src.agents.seshat import SeshatAgent, create_seshat_agent
src/agents/seshat/__init__.py:14: in <module>
    from .agent import (
src/agents/seshat/agent.py:26: in <module>
    from .consent_integration import (
src/agents/seshat/consent_integration.py:15: in <module>
    from ...memory.consent import (
src/memory/__init__.py:15: in <module>
    from .consent import (
src/memory/consent.py:20: in <module>
    from .index import AccessType, ConsentRecord, VaultIndex
src/memory/index.py:23: in <module>
    from .storage import BlobMetadata, BlobStatus, BlobType
src/memory/storage.py:25: in <module>
    from cryptography.exceptions import InvalidTag
/usr/lib/python3/dist-packages/cryptography/exceptions.py:9: in <module>
    from cryptography.hazmat.bindings._rust import exceptions as rust_exceptions
E   pyo3_runtime.PanicException: Python API call failed
----------------------------- Captured stderr call -----------------------------
ModuleNotFoundError: No module named '_cffi_backend'
thread '<unnamed>' panicked at /usr/share/cargo/registry/pyo3-0.20.2/src/err/mod.rs:788:5:
Python API call failed
stack backtrace:
note: Some details are omitted, run with `RUST_BACKTRACE=full` for a verbose backtrace.
=============================== warnings summary ===============================
src/sdk/testing/fixtures.py:133
  /home/user/Agent-OS/src/sdk/testing/fixtures.py:133: PytestCollectionWarning: cannot collect test class 'TestRequestBuilder' because it has a __init__ constructor (from: tests/test_sdk.py)
    class TestRequestBuilder:

src/sdk/testing/runner.py:80
  /home/user/Agent-OS/src/sdk/testing/runner.py:80: PytestCollectionWarning: cannot collect test class 'TestSuite' because it has a __init__ constructor (from: tests/test_sdk.py)
    class TestSuite:

tests/test_web.py::TestChatAPI::test_chat_status
  /home/user/Agent-OS/src/web/models.py:108: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ErrorResponse(BaseModel):

tests/test_web.py::TestChatAPI::test_chat_status
  /home/user/Agent-OS/src/web/models.py:147: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class OperationResponse(BaseModel):

tests/test_web.py::TestChatAPI::test_chat_status
  /home/user/Agent-OS/src/web/models.py:168: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class DeleteResponse(BaseModel):

tests/test_web.py::TestChatAPI::test_chat_status
  /home/user/Agent-OS/src/web/models.py:186: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgentControlResponse(BaseModel):

tests/test_web.py::TestChatAPI::test_chat_status
  /home/user/Agent-OS/src/web/models.py:199: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class AgentsOverviewResponse(BaseModel):

tests/test_web.py::TestChatAPI::test_chat_status
  /home/user/Agent-OS/src/web/models.py:229: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class ModelInfo(BaseModel):

tests/test_web.py::TestChatAPI::test_chat_status
  /home/user/Agent-OS/src/web/models.py:368: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class HealthResponse(BaseModel):

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ============================
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_create_store
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_add_entry
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_get_entry
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_query_by_type
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_query_by_severity
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_query_by_source
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_query_by_time_range
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_get_stats
FAILED tests/test_advanced_memory.py::TestSecurityIntelligenceStore::test_count
FAILED tests/test_advanced_memory.py::TestPatternSynthesizer::test_detect_volumetric_pattern
FAILED tests/test_advanced_memory.py::TestBehavioralBaseline::test_score_anomalous_activity
FAILED tests/test_advanced_memory.py::TestBoundaryDaemonConnector::test_policy_decision_creation
FAILED tests/test_advanced_memory.py::TestBoundaryDaemonConnector::test_tripwire_alert_creation
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_initialize_manager
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_start_manager
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_factory_function
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_ingest_entry
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_ingest_siem_event
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_ingest_boundary_event
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_query_entries
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_get_threat_clusters
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_get_anomaly_score
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_generate_summary
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_get_status
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_get_stats
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_get_boundary_mode
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryManager::test_set_boundary_mode
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryIntegration::test_full_pipeline
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryIntegration::test_multi_source_correlation
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryIntegration::test_anomaly_detection_flow
FAILED tests/test_advanced_memory.py::TestAdvancedMemoryIntegration::test_concurrent_operations
FAILED tests/test_agent_config.py::TestConfigLoader::test_load_from_string - ...
FAILED tests/test_attack_detection.py::TestAttackDetector::test_process_flow_event
FAILED tests/test_attack_detection.py::TestAttackDetector::test_attack_correlation
FAILED tests/test_attack_detection.py::TestAttackDetectionIntegration::test_full_pipeline
FAILED tests/test_boundary.py::TestTripwire::test_tripwire_reset - assert Fal...
FAILED tests/test_boundary.py::TestTripwireSystem::test_reset_all - assert 0 ...
FAILED tests/test_boundary.py::TestPolicyEngine::test_mode_requires_authorization
FAILED tests/test_boundary.py::TestEnforcementLayer::test_resume - assert Fal...
FAILED tests/test_boundary_integration.py::TestFailSafeMechanisms::test_resume_requires_authorization
FAILED tests/test_boundary_integration.py::TestFailSafeMechanisms::test_fail_closed_client_behavior
FAILED tests/test_boundary_integration.py::TestTripwireSystem::test_tripwire_requires_auth_to_reset
FAILED tests/test_boundary_integration.py::TestPolicyEnforcement::test_mode_change_requires_auth_to_lower_security
FAILED tests/test_federation.py::TestIdentityModule::test_key_pair_generate
FAILED tests/test_federation.py::TestIdentityModule::test_identity_manager_initialization
FAILED tests/test_federation.py::TestIdentityModule::test_identity_manager_sign_and_verify
FAILED tests/test_federation.py::TestIdentityModule::test_identity_manager_register_and_get_identity
FAILED tests/test_federation.py::TestIdentityModule::test_identity_manager_trust_identity
FAILED tests/test_federation.py::TestIdentityModule::test_create_identity_function
FAILED tests/test_federation.py::TestCryptoModule::test_default_crypto_provider_encrypt_decrypt
FAILED tests/test_federation.py::TestCryptoModule::test_default_crypto_provider_key_exchange
FAILED tests/test_federation.py::TestCryptoModule::test_session_manager_create_session
FAILED tests/test_federation.py::TestCryptoModule::test_session_manager_encrypt_for_peer
FAILED tests/test_federation.py::TestCryptoModule::test_encrypt_decrypt_message_functions
FAILED tests/test_federation.py::TestNodeModule::test_federation_node_start_stop
FAILED tests/test_federation.py::TestNodeModule::test_federation_node_double_start
FAILED tests/test_federation.py::TestIntegration::test_two_nodes_connect - py...
FAILED tests/test_federation.py::TestIntegration::test_identity_and_signing
FAILED tests/test_federation.py::TestIntegration::test_encryption_roundtrip
FAILED tests/test_federation.py::TestIntegration::test_key_exchange_session
FAILED tests/test_messaging_bus.py::TestInMemoryMessageBus::test_dead_letter_queue
FAILED tests/test_messaging_bus.py::TestInMemoryMessageBus::test_retry_dead_letter
FAILED tests/test_messaging_bus.py::TestInMemoryMessageBus::test_shutdown - s...
FAILED tests/test_mobile.py::TestCacheEntry::test_touch - AssertionError: ass...
FAILED tests/test_pq_production.py::TestKeyBackupManager::test_export_import_key
FAILED tests/test_pq_production.py::TestKeyBackupManager::test_wrong_password
FAILED tests/test_pq_production.py::TestBackupWithStorage::test_backup_persistence
FAILED tests/test_utils.py::TestSensitiveDataRedactor::test_redact_openai_key
FAILED tests/test_utils.py::TestFactoryFunctions::test_get_encryption_service
FAILED tests/test_utils.py::TestFactoryFunctions::test_encrypt_decrypt_shortcuts
FAILED tests/test_utils.py::TestMasterKeyManagement::test_master_key_from_env
FAILED tests/test_utils.py::TestMasterKeyManagement::test_encrypted_key_storage_format
FAILED tests/test_utils.py::TestSensitiveDataRedactorParameterized::test_redaction_patterns[openai_key]
FAILED tests/test_utils.py::TestSensitiveDataRedactorParameterized::test_redaction_patterns[github_oauth]
FAILED tests/test_utils.py::TestSensitiveDataRedactorParameterized::test_redaction_patterns[github_server]
FAILED tests/test_utils.py::TestSensitiveDataRedactorParameterized::test_redaction_patterns[slack_bot]
FAILED tests/test_utils.py::TestSensitiveDataRedactorParameterized::test_redaction_patterns[slack_user]
FAILED tests/test_utils.py::TestSensitiveDataRedactorParameterized::test_redaction_patterns[private_key]
FAILED tests/test_web.py::TestAgentStore::test_get_all_agents - ImportError: ...
FAILED tests/test_web.py::TestAgentStore::test_update_status - ImportError: c...
FAILED tests/test_web.py::TestAgentStore::test_add_log - ImportError: cannot ...
FAILED tests/test_web.py::TestMemoryStore::test_create_and_get - pyo3_runtime...
FAILED tests/test_web.py::TestMemoryStore::test_search - pyo3_runtime.PanicEx...
FAILED tests/test_web.py::TestMemoryStore::test_delete - pyo3_runtime.PanicEx...
FAILED tests/test_web.py::TestSecurityModels::test_attack_summary_model - pyo...
FAILED tests/test_web.py::TestSecurityModels::test_recommendation_summary_model
FAILED tests/test_web.py::TestSecurityModels::test_attack_detection_status_model
FAILED tests/test_web.py::TestSecurityModels::test_approve_request_model - py...
FAILED tests/test_web.py::TestSecurityModels::test_pipeline_control_request_model
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_create_correlator
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_default_rules_loaded
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_add_custom_rule
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_correlate_single_entry
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_correlate_finds_kill_chain
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_threat_level_calculation
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_cluster_entry_tracking
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_get_cluster_by_id
ERROR tests/test_advanced_memory.py::TestThreatCorrelator::test_correlator_stats
ERROR tests/test_advanced_memory.py::TestPatternSynthesizer::test_create_synthesizer
ERROR tests/test_advanced_memory.py::TestPatternSynthesizer::test_detect_patterns
ERROR tests/test_advanced_memory.py::TestPatternSynthesizer::test_analyze_trends
ERROR tests/test_advanced_memory.py::TestPatternSynthesizer::test_generate_summary
ERROR tests/test_advanced_memory.py::TestPatternSynthesizer::test_summary_to_dict
ERROR tests/test_advanced_memory.py::TestPatternSynthesizer::test_get_patterns
ERROR tests/test_advanced_memory.py::TestPatternSynthesizer::test_synthesizer_stats
ERROR tests/test_advanced_memory.py::TestBehavioralBaseline::test_create_baseline
ERROR tests/test_advanced_memory.py::TestBehavioralBaseline::test_learn_baseline
ERROR tests/test_advanced_memory.py::TestBehavioralBaseline::test_is_ready - ...
ERROR tests/test_advanced_memory.py::TestBehavioralBaseline::test_score_normal_activity
ERROR tests/test_advanced_memory.py::TestBehavioralBaseline::test_anomaly_score_structure
ERROR tests/test_advanced_memory.py::TestBehavioralBaseline::test_anomaly_score_to_dict
ERROR tests/test_advanced_memory.py::TestBehavioralBaseline::test_baseline_stats
ERROR tests/test_advanced_memory.py::TestBoundaryDaemonConnector::test_create_connector
ERROR tests/test_advanced_memory.py::TestBoundaryDaemonConnector::test_initial_mode
ERROR tests/test_advanced_memory.py::TestBoundaryDaemonConnector::test_set_mode
ERROR tests/test_advanced_memory.py::TestBoundaryDaemonConnector::test_connector_stats
ERROR tests/test_advanced_memory.py::TestBoundaryDaemonConnector::test_connect_success
ERROR tests/test_advanced_memory.py::TestBoundaryDaemonConnector::test_connect_failure
ERROR tests/test_utils.py::TestEncryptionService::test_encrypt_decrypt_string
ERROR tests/test_utils.py::TestEncryptionService::test_encrypt_decrypt_bytes
ERROR tests/test_utils.py::TestEncryptionService::test_encrypt_different_outputs
ERROR tests/test_utils.py::TestEncryptionService::test_decrypt_invalid_format
ERROR tests/test_utils.py::TestEncryptionService::test_decrypt_legacy_format_rejected
ERROR tests/test_utils.py::TestEncryptionService::test_decrypt_plaintext_passthrough
ERROR tests/test_utils.py::TestEncryptionService::test_derive_key - pyo3_runt...
ERROR tests/test_utils.py::TestEncryptionService::test_encrypt_with_associated_data
ERROR tests/test_utils.py::TestCredentialManager::test_store_and_retrieve - p...
ERROR tests/test_utils.py::TestCredentialManager::test_retrieve_nonexistent
ERROR tests/test_utils.py::TestCredentialManager::test_delete_credential - py...
ERROR tests/test_utils.py::TestCredentialManager::test_list_keys - pyo3_runti...
ERROR tests/test_utils.py::TestCredentialManager::test_persistence - pyo3_run...
ERROR tests/test_utils.py::TestEncryptionParameterized::test_encrypt_decrypt_roundtrip[simple]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_encrypt_decrypt_roundtrip[empty]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_encrypt_decrypt_roundtrip[single_char]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_encrypt_decrypt_roundtrip[large_string]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_encrypt_decrypt_roundtrip[unicode]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_encrypt_decrypt_roundtrip[special_chars]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_encrypt_decrypt_roundtrip[whitespace]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_encrypt_decrypt_roundtrip[multiline]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_key_derivation_length[short_password]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_key_derivation_length[long_password]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_key_derivation_length[alphanumeric]
ERROR tests/test_utils.py::TestEncryptionParameterized::test_key_derivation_length[unicode_password]
ERROR tests/test_web.py::TestChatAPI::test_chat_status - pyo3_runtime.PanicEx...
ERROR tests/test_web.py::TestChatAPI::test_send_message - pyo3_runtime.PanicE...
ERROR tests/test_web.py::TestChatAPI::test_list_conversations - pyo3_runtime....
ERROR tests/test_web.py::TestChatAPI::test_send_empty_message - pyo3_runtime....
ERROR tests/test_web.py::TestAgentsAPI::test_list_agents - pyo3_runtime.Panic...
ERROR tests/test_web.py::TestAgentsAPI::test_get_agent - pyo3_runtime.PanicEx...
ERROR tests/test_web.py::TestAgentsAPI::test_get_nonexistent_agent - pyo3_run...
ERROR tests/test_web.py::TestAgentsAPI::test_agent_metrics - pyo3_runtime.Pan...
ERROR tests/test_web.py::TestAgentsAPI::test_start_agent - pyo3_runtime.Panic...
ERROR tests/test_web.py::TestAgentsAPI::test_stop_agent - pyo3_runtime.PanicE...
ERROR tests/test_web.py::TestAgentsAPI::test_agents_overview - pyo3_runtime.P...
ERROR tests/test_web.py::TestConstitutionAPI::test_get_overview - pyo3_runtim...
ERROR tests/test_web.py::TestConstitutionAPI::test_list_sections - pyo3_runti...
ERROR tests/test_web.py::TestConstitutionAPI::test_list_rules - pyo3_runtime....
ERROR tests/test_web.py::TestConstitutionAPI::test_get_rule - pyo3_runtime.Pa...
ERROR tests/test_web.py::TestConstitutionAPI::test_create_rule - pyo3_runtime...
ERROR tests/test_web.py::TestConstitutionAPI::test_create_supreme_rule_forbidden
ERROR tests/test_web.py::TestConstitutionAPI::test_validate_content - pyo3_ru...
ERROR tests/test_web.py::TestConstitutionAPI::test_validate_harmful_content
ERROR tests/test_web.py::TestMemoryAPI::test_list_memories - pyo3_runtime.Pan...
ERROR tests/test_web.py::TestMemoryAPI::test_get_memory_stats - pyo3_runtime....
ERROR tests/test_web.py::TestMemoryAPI::test_create_memory - pyo3_runtime.Pan...
ERROR tests/test_web.py::TestMemoryAPI::test_create_memory_without_consent - ...
ERROR tests/test_web.py::TestMemoryAPI::test_search_memories - pyo3_runtime.P...
ERROR tests/test_web.py::TestMemoryAPI::test_export_memories - pyo3_runtime.P...
ERROR tests/test_web.py::TestSystemAPI::test_system_info - pyo3_runtime.Panic...
ERROR tests/test_web.py::TestSystemAPI::test_system_status - pyo3_runtime.Pan...
ERROR tests/test_web.py::TestSystemAPI::test_component_health - pyo3_runtime....
ERROR tests/test_web.py::TestSystemAPI::test_list_settings - pyo3_runtime.Pan...
ERROR tests/test_web.py::TestSystemAPI::test_get_setting - pyo3_runtime.Panic...
ERROR tests/test_web.py::TestSystemAPI::test_update_setting - pyo3_runtime.Pa...
ERROR tests/test_web.py::TestSystemAPI::test_system_version - pyo3_runtime.Pa...
ERROR tests/test_web.py::TestSystemAPI::test_system_metrics - pyo3_runtime.Pa...
ERROR tests/test_web.py::TestSystemAPI::test_shutdown_without_confirm - pyo3_...
ERROR tests/test_web.py::TestWebSocket::test_websocket_connect - pyo3_runtime...
ERROR tests/test_web.py::TestWebSocket::test_websocket_send_message - pyo3_ru...
ERROR tests/test_web.py::TestWebSocket::test_websocket_ping_pong - pyo3_runti...
ERROR tests/test_web.py::TestWebSocket::test_websocket_get_history - pyo3_run...
ERROR tests/test_web.py::TestHealthCheck::test_health_endpoint - pyo3_runtime...
ERROR tests/test_web.py::TestAcceptanceCriteria::test_chat_interface_works - ...
ERROR tests/test_web.py::TestAcceptanceCriteria::test_agent_monitoring_works
ERROR tests/test_web.py::TestAcceptanceCriteria::test_constitutional_editor_works
ERROR tests/test_web.py::TestAcceptanceCriteria::test_memory_management_works
ERROR tests/test_web.py::TestVoiceAPI::test_voice_status - pyo3_runtime.Panic...
ERROR tests/test_web.py::TestVoiceAPI::test_list_voices - pyo3_runtime.PanicE...
ERROR tests/test_web.py::TestVoiceAPI::test_transcribe_with_invalid_base64 - ...
ERROR tests/test_web.py::TestVoiceAPI::test_transcribe_with_valid_base64 - py...
ERROR tests/test_web.py::TestVoiceAPI::test_synthesize_without_text - pyo3_ru...
ERROR tests/test_web.py::TestVoiceAPI::test_synthesize_with_text - pyo3_runti...
ERROR tests/test_web.py::TestVoiceAPI::test_synthesize_stream - pyo3_runtime....
ERROR tests/test_web.py::TestVoiceAPI::test_update_stt_config - pyo3_runtime....
ERROR tests/test_web.py::TestVoiceAPI::test_update_tts_config - pyo3_runtime....
ERROR tests/test_web.py::TestVoiceWebSocket::test_voice_websocket_connect - p...
ERROR tests/test_web.py::TestVoiceWebSocket::test_voice_websocket_unknown_type
ERROR tests/test_web.py::TestVoiceWebSocket::test_voice_websocket_synthesize
ERROR tests/test_web.py::TestVoiceWebSocket::test_voice_websocket_transcribe
ERROR tests/test_web.py::TestSecurityAPI::test_list_attacks - pyo3_runtime.Pa...
ERROR tests/test_web.py::TestSecurityAPI::test_list_attacks_with_filters - py...
ERROR tests/test_web.py::TestSecurityAPI::test_get_attack_detail - pyo3_runti...
ERROR tests/test_web.py::TestSecurityAPI::test_get_attack_detection_status - ...
ERROR tests/test_web.py::TestSecurityAPI::test_list_recommendations - pyo3_ru...
ERROR tests/test_web.py::TestSecurityAPI::test_approve_recommendation - pyo3_...
ERROR tests/test_web.py::TestSecurityAPI::test_reject_recommendation - pyo3_r...
ERROR tests/test_web.py::TestSecurityAPI::test_add_comment_to_recommendation
ERROR tests/test_web.py::TestSecurityAPI::test_pipeline_control - pyo3_runtim...
ERROR tests/test_web.py::TestSecurityAPI::test_invalid_pipeline_action - pyo3...
ERROR tests/test_web.py::TestSecurityAPI::test_list_patterns - pyo3_runtime.P...
= 89 failed, 1464 passed, 68 skipped, 9 warnings, 121 errors in 78.68s (0:01:18) =

=== BASELINE SUMMARY ===
Date: Sat Feb  7 05:07:04 UTC 2026
Branch: main
Tag: v0.1.0-pre-refocus
Result: 89 failed, 1464 passed, 68 skipped, 121 errors
Pre-existing collection errors (4 modules excluded): test_kernel, test_memory_vault, test_pq_keys, test_seshat

Error categories:
- IndentationError in src/kernel/rules.py:86 (pre-existing bug)
- cryptography module broken (system-level _cffi_backend missing)
- numpy missing (test_seshat)
- 121 runtime errors mostly from pyo3/cryptography panic
